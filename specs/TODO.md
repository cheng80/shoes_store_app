# 할 일 목록 (TODO)

## 📅 최종 업데이트: 2025-12-17 (완료 항목 반영)

---

## 📝 예정된 기능 (Planned Features)

### 재고 결제 품의 전자문서
- **상태**: 예정 (아직 제작 시작 전)
- **설명**: 재고 관련 결제 품의를 위한 전자문서 화면
- **주요 기능**:
  - 3단계 결제 프로세스 (직원 → 팀장 → 이사)
  - 각 결제 단계별 결제 버튼
  - 결제 상태 추적 및 관리
- **참고**: 현재는 기록만 되어 있으며, 구체적인 설계 및 구현은 추후 진행 예정

---

## 🚀 우선순위 높음 (High Priority)

### 1. 주문/반품 기능 구현
- [x] **주문 생성 기능** (완료)
  - 사용자가 상품을 주문할 수 있는 기능 ✅
  - 주문 정보를 DB에 저장 ✅ (`purchase_view.dart`의 `_savePurchaseItemsToDb()`)
  - 주문 번호 생성 로직 ✅ (`OrderUtils.generateOrderCode()`)

- [x] **주문 상세 정보 DB 연동** (완료)
  - `OrderDetailView`에서 실제 DB 데이터 조회 ✅ (`order_detail_view.dart`)
  - 주문 상품 목록 DB에서 가져오기 ✅ (`PurchaseItemHandler.queryByPurchaseId()`)

- [x] **픽업 완료 기능** (완료)
  - 주문 관리 화면의 "픽업 완료" 버튼 동작 구현 ✅ (`order_detail_view.dart`의 `_handlePickupComplete()`)
  - 주문 상태 업데이트 ✅ (PurchaseItem의 pcStatus를 '제품 수령 완료'로 업데이트)

- [x] **반품 요청 기능** (완료)
  - 사용자가 주문한 상품을 반품 요청할 수 있는 기능 ✅ (`return_detail_view.dart`)
  - 반품 상태 업데이트 ✅ (PurchaseItem의 pcStatus를 '반품 신청' 또는 '반품 완료'로 업데이트)

- [ ] **반품 확인 기능** (부분 완료)
  - 반품 관리 화면에서 반품 상태 확인 가능 ✅ (`admin_return_order_detail_view.dart`)
  - 반품 확인 버튼 동작 구현 (현재는 상태 표시만 가능, 버튼 기능 미구현)

### 2. 상품 관련 기능
- [x] **상품 목록 화면** (완료)
  - 사용자가 상품을 볼 수 있는 메인 화면 ✅ (`search_view.dart`)
  - 상품 검색 기능 ✅ (`_onSearchChanged()`)
  - 카테고리별 필터링 (부분 완료: 검색 기능은 있으나 카테고리 필터는 미구현)

- [x] **상품 상세 화면** (완료)
  - 상품 상세 정보 표시 ✅ (`detail_view.dart`)
  - 색상/사이즈 선택 ✅ (ChoiceChip으로 색상 선택, 사이즈 선택 가능)
  - 장바구니 추가 기능 ✅ (`CartStorage.addToCart()`)

- [x] **상품 이미지 표시** (완료)
  - `images/` 폴더의 상품 이미지 로드 ✅ (`ProductImageHandler`, `ProductBaseHandler.queryListWithFirstImage()`)
  - 이미지 경로 표시 ✅ (여러 이미지 슬라이더는 미구현, 첫 번째 이미지만 표시)

### 3. 장바구니 기능
- [x] **장바구니 화면** (완료)
  - 선택한 상품 목록 표시 ✅ (`cart.dart`)
  - 수량 조절 기능 ✅ (`_inc()`, `_dec()`)
  - 상품 삭제 기능 ✅ (`_remove()`)
  - 총 금액 계산 ✅ (`totalPrice` getter)

- [x] **장바구니 저장소 연동** (완료)
  - 장바구니 정보를 로컬 저장소에 저장 ✅ (`CartStorage` - GetStorage 사용)
  - 사용자별 장바구니 관리 ✅ (로컬 저장소 기반, DB는 미사용)

### 4. 결제 기능
- [x] **결제 화면** (완료)
  - 주문 정보 확인 ✅ (`purchase_view.dart`)
  - 결제 수단 선택 ✅ (더미: "카드(더미)" 표시)
  - 결제 처리 ✅ (더미: `_savePurchaseItemsToDb()`로 DB 저장, 실제 결제 게이트웨이는 미연동)

---

## 📋 우선순위 중간 (Medium Priority)

### 5. 사용자 화면 개선
- [ ] **메인 화면 네비게이션**
  - 로그인 후 상품 페이지로 자동 이동
  - 하단 네비게이션 바 추가
  - 홈, 검색, 장바구니, 프로필 메뉴

- [ ] **사용자 주문 내역 화면**
  - 사용자가 자신의 주문 내역을 확인할 수 있는 화면
  - 주문 상태 확인
  - 반품 요청 기능

- [ ] **사용자 프로필 화면**
  - 프로필 정보 표시
  - 프로필 수정 화면으로 이동

### 6. 관리자 기능 개선
- [ ] **주문 필터링**
  - 주문 상태별 필터 (대기중, 준비완료, 픽업완료 등)
  - 날짜별 필터

- [ ] **주문 검색**
  - 주문 번호로 검색
  - 고객명으로 검색

- [ ] **통계 대시보드**
  - 일일/월간 매출 통계
  - 인기 상품 통계
  - 주문 현황 차트

- [ ] **재고 관리**
  - 상품 재고 조회
  - 재고 수정 기능

- [ ] **재고 결제 품의 전자문서 화면** (예정)
  - 재고 관련 결제 품의 전자문서 화면
  - 3단계 결제 프로세스: 직원 → 팀장 → 이사
  - 각 결제 단계별 결제 버튼 구현
  - 결제 상태 추적 및 관리

### 7. 데이터베이스 스키마
- [ ] **Order 테이블 설계 및 구현**
  - 주문 정보 저장 테이블
  - 주문 상품 정보 저장 테이블

- [ ] **Cart 테이블 설계 및 구현**
  - 장바구니 정보 저장 테이블

- [ ] **Product 테이블 연동**
  - 상품 정보 DB 연동
  - 상품 이미지 경로 관리

---

## 🔄 우선순위 낮음 (Low Priority)

### 8. UI/UX 개선
- [ ] **애니메이션 추가**
  - 페이지 전환 애니메이션
  - 로딩 애니메이션

- [ ] **다크 모드 지원**
  - 테마 전환 기능
  - 다크 모드 색상 스킴

- [ ] **접근성 개선**
  - 스크린 리더 지원
  - 키보드 네비게이션

### 9. 성능 최적화
- [ ] **이미지 최적화**
  - 이미지 캐싱
  - 이미지 압축

- [x] **DB 쿼리 최적화**
  - 인덱스 추가 (완료: Purchase, PurchaseItem, Product, Customer, Employee, LoginHistory 테이블 인덱스 추가)
  - 쿼리 성능 개선
  - 참고: Retail 테이블은 현재 미사용 (재고는 Product.pQuantity로 본사가 중앙 관리)

### 10. 테스트
- [ ] **단위 테스트**
  - 모델 클래스 테스트
  - 유틸리티 함수 테스트

- [ ] **위젯 테스트**
  - 주요 화면 위젯 테스트

- [ ] **통합 테스트**
  - 로그인/회원가입 플로우 테스트
  - 주문 플로우 테스트

### 11. 문서화
- [x] **코드 품질 개선**
  - 하드코딩 제거 및 Config 중앙화 (완료: pickupStatus, loginStatus, district)
  - 주석 추가로 가독성 향상 (완료: config 값 사용 부분에 실제 데이터 값 주석 추가)

- [x] **프로젝트 문서 정리 및 구조화** (완료: 2025-12-17)
  - 마이그레이션 완료 문서 삭제 (6개)
  - DATABASE_GUIDE.md 생성 (통합 가이드)
  - SCREEN_PROCESSING_PATTERNS.md 재작성 (효율적 패턴 중심)
  - 문서 카테고리별 구조 정리
  - TODO.md와 PROGRESS.md 역할 명확화

- [x] **주문 상태 로직 문서 검토** (완료: 2025-12-17)
  - ORDER_STATUS_LOGIC_IMPROVEMENT.md 실제 구현 상태와 일치 여부 검토
  - 구현 완료 항목 정리 및 문서 업데이트

- [ ] **API 문서**
  - DB 스키마 문서화 (진행 중: DATABASE_SCHEMA.md, DATABASE_GUIDE.md 존재)
  - 주요 함수 문서화

- [ ] **사용자 가이드**
  - 앱 사용법 가이드
  - 관리자 매뉴얼

---

## 🐛 알려진 이슈

### 현재 해결 필요 없는 이슈
- 없음

### 향후 개선 필요 사항
- [x] 태블릿 감지 로직 추가 개선 (완료: `admin_tablet_utils.dart`에서 iOS/Android 구분, iPad Mini 지원, 창 모드 고려)
- [ ] 에러 메시지 다국어 지원
- [ ] 로그인 세션 만료 처리
- [x] DB 초기화 중복 방지 (완료: GetStorage로 초기화 상태 관리)
- [x] DB 연결 안전하게 닫기 (완료: DatabaseManager.closeAndReset() 메서드 추가)

---

## 💡 향후 고려 사항

1. **서버 연동**
   - 현재는 로컬 DB만 사용
   - 향후 서버 API 연동 고려

2. **푸시 알림**
   - 주문 상태 변경 알림
   - 프로모션 알림

3. **소셜 로그인**
   - 구글 로그인
   - 카카오 로그인

4. **결제 시스템 연동**
   - 실제 결제 게이트웨이 연동
   - 결제 내역 관리

5. **리뷰 시스템**
   - 상품 리뷰 작성
   - 리뷰 평점 표시

---

## 📌 참고

- **완료된 작업의 상세 내용**: `PROGRESS.md` 참고
  - 이 문서는 작업 계획 및 진행 상황만 관리합니다.
  - 완료된 작업의 상세 설명, 구현 내용, 기술적 개선 사항은 `PROGRESS.md`에 기록됩니다.
- **설계 사양**: `DESIGN_SPEC.md` 참고

## 📝 문서 사용 가이드

### 작업 흐름
1. **작업 계획**: 이 문서(`TODO.md`)에 작업 항목 추가
2. **작업 시작**: 해당 항목을 "진행 중"으로 표시 (선택사항)
3. **작업 완료**: 
   - 이 문서에서 체크박스 체크 ✅ (간단한 완료 표시)
   - `PROGRESS.md`에 상세 내용 기록 (구현 내용, 변경 사항 등)

### 두 문서의 차이
- **TODO.md**: "무엇을 해야 하는가?" (계획)
- **PROGRESS.md**: "무엇을 했는가?" (기록)

